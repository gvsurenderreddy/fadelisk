#!/usr/bin/python -OO

"""
Fadelisk application launcher script

Adds library paths, imports packages, then instantiates and runs
the Fadelisk application.
"""

import sys
from os.path import realpath, dirname, join
# sys.dont_write_bytecode = True

def prepend_path(path):
    """Prepend a directory to the system path"""
    sys.path.insert(0, path)

def realjoin(*args):
    """Join directory path parts and resolve them to their real path"""
    return realpath(join(*args))

def add_relative_libs(*args):
    """Add a path relative to the parent directory of scripts directory"""
    script = sys.argv[0]
    if not script or script == '-':                 # script invoked in pipeline
        return
    script = realpath(script)                       # get full, absolute path
    script_parent = realjoin(dirname(script), '..') # find parent directory
    prepend_path(realjoin(script_parent, *args))    # add relative path

add_relative_libs('lib', 'python')
import fadelisk

fadelisk.begins()

